<template>
  <svg
    class="ui-clock-face"
    viewBox="0 0 60 60"
    xmlns="http://www.w3.org/2000/svg"
  >
    <title><DateTime format="H:mm:ss" @update="handleUpdate" /></title>
    <g>
      <ClockHand
        className="ui-hour-hand"
        :angle="getAngle('hour')"
        :length="15"
      />
      <ClockHand
        className="ui-minute-hand"
        :angle="getAngle('min')"
        :length="-50"
      />
      <ClockHand
        className="ui-second-hand"
        :angle="getAngle('sec')"
        :length="5"
      />
    </g>
    <path
      d="M30.831 54.136c-.179-.149-.384-.224-.665-.224-.307 0-.537.075-.716.199a1.18 1.18 0 00-.409.521c-.076.199-.179.447-.204.695a61.63 61.63 0 01-.077.695l.026.025c.153-.249.358-.447.613-.571.23-.124.512-.174.844-.174.281 0 .537.05.741.149.23.099.409.223.562.397.154.174.256.348.358.571.077.223.128.471.128.72 0 .198-.025.422-.102.645a1.736 1.736 0 01-.332.596 2.15 2.15 0 01-.588.446c-.256.124-.563.174-.921.174-.434 0-.766-.074-1.048-.248-.281-.174-.46-.397-.613-.645a2.494 2.494 0 01-.281-.869 5.82 5.82 0 01-.077-.918c0-.397.026-.77.102-1.117.077-.372.179-.695.358-.968.154-.273.384-.496.665-.67.281-.174.613-.248 1.022-.248.486 0 .869.124 1.151.372.28.247.433.593.485 1.067h-.69c-.051-.271-.152-.468-.332-.62zm-1.253 1.861a1.061 1.061 0 00-.383.273 1.249 1.249 0 00-.23.397 1.562 1.562 0 00-.077.496c0 .174.026.348.077.497.051.149.128.298.23.397.102.099.23.198.383.273.154.074.333.099.511.099.179 0 .358-.025.512-.099a.988.988 0 00.358-.273c.102-.124.179-.248.23-.397.051-.149.076-.298.076-.472a1.45 1.45 0 00-.281-.893 1.227 1.227 0 00-.358-.273c-.128-.075-.306-.099-.511-.099a1.163 1.163 0 00-.537.074zm15.644-5.485h-2.3v-.025l-.307 1.614.025.024a.889.889 0 01.486-.297c.205-.075.409-.1.588-.1.256 0 .511.05.716.124.23.075.434.199.588.373.179.173.306.372.409.595.102.224.153.521.153.844 0 .248-.051.472-.128.695a1.51 1.51 0 01-.383.596 1.92 1.92 0 01-.639.422 2.41 2.41 0 01-.895.148 2.25 2.25 0 01-.716-.099 2.152 2.152 0 01-.588-.298 1.315 1.315 0 01-.409-.496 1.479 1.479 0 01-.153-.695h.69c0 .149.051.273.102.397.052.124.154.224.256.323.102.099.23.174.383.223.154.05.307.075.486.075.154 0 .332-.025.46-.075.154-.049.281-.149.384-.248a.995.995 0 00.255-.422c.077-.174.103-.372.103-.596 0-.173-.026-.347-.103-.521a1.204 1.204 0 00-.255-.397 1.695 1.695 0 00-.409-.273 1.227 1.227 0 00-.537-.099c-.23 0-.435.05-.614.149a1.383 1.383 0 00-.46.397l-.588-.025.537-2.928h2.863v.595zM16.26 55.451h-.766a6.28 6.28 0 01.23-1.39c.127-.447.281-.893.485-1.29.205-.397.435-.819.691-1.192a6.68 6.68 0 01.843-1.017h-2.991v-.67h3.758v.571c-.307.297-.588.62-.844 1.017a9.895 9.895 0 00-.69 1.241 8.659 8.659 0 00-.485 1.365c-.128.47-.204.915-.231 1.365zM4.962 41.23c.102-.174.23-.322.384-.447a1.37 1.37 0 01.536-.273c.205-.074.409-.099.639-.099.307 0 .588.05.818.124.23.075.409.199.537.323.128.124.23.298.307.471.077.174.102.348.102.522 0 .248-.077.496-.204.695a1.235 1.235 0 01-.588.471c.358.099.613.273.767.521.153.248.255.546.255.894 0 .273-.051.521-.153.719-.102.224-.23.398-.409.546a1.797 1.797 0 01-.614.323c-.23.075-.485.099-.741.099-.281 0-.537-.024-.767-.099-.23-.074-.46-.174-.613-.323a1.794 1.794 0 01-.409-.546 1.753 1.753 0 01-.154-.744c0-.323.077-.621.256-.869s.435-.422.741-.546a1.213 1.213 0 01-.588-.471 1.197 1.197 0 01-.23-.695.945.945 0 01.128-.596zm50.05 2.904h.818v.596h-.792v1.315h-.665V44.73h-2.556v-.646l2.633-3.673h.562v3.723zM5.703 45.251c.23.198.537.298.895.298.179 0 .332-.025.486-.075a.974.974 0 00.383-.223c.102-.1.179-.224.256-.348.076-.124.076-.273.076-.446a.793.793 0 00-.102-.422 1.742 1.742 0 00-.255-.348.967.967 0 00-.384-.223 1.523 1.523 0 00-.946 0 .963.963 0 00-.383.223c-.102.099-.205.199-.256.348a1.158 1.158 0 00-.102.446.847.847 0 00.332.77zm48.696-3.872l-1.943 2.755h1.943v-2.755zm-48.772.894a.615.615 0 00.23.273c.102.074.204.124.332.173.128.025.256.05.409.05.281 0 .511-.075.69-.248.179-.149.281-.373.281-.67 0-.298-.102-.497-.281-.646-.179-.149-.409-.223-.69-.223a2 2 0 00-.383.05c-.128.024-.23.099-.333.173a.711.711 0 00-.204.273.815.815 0 00-.077.373.588.588 0 00.026.422zm50.254-13.278h-.69c0-.273.051-.521.128-.745.077-.223.205-.422.332-.57.154-.149.333-.273.563-.373.23-.099.485-.124.767-.124.255 0 .485.025.69.099.204.075.409.149.562.273.154.125.281.273.384.472.102.199.127.422.127.67 0 .248-.076.472-.23.67a1.386 1.386 0 01-.562.447v.025c.358.074.613.248.792.496.179.248.256.546.256.893 0 .273-.051.522-.153.745a1.559 1.559 0 01-.435.546 1.712 1.712 0 01-.639.323 2.73 2.73 0 01-.767.099c-.307 0-.562-.05-.792-.124a1.871 1.871 0 01-.614-.348 1.272 1.272 0 01-.383-.57c-.102-.224-.128-.497-.128-.77h.69c0 .372.128.67.333.894.204.223.511.347.92.347.179 0 .332-.025.485-.074.154-.05.282-.124.409-.224a.95.95 0 00.282-.347.959.959 0 00.102-.447.985.985 0 00-.102-.471 1.257 1.257 0 00-.256-.348.705.705 0 00-.383-.198c-.154-.025-.307-.075-.486-.075-.154 0-.281 0-.409.025v-.648c-.012-.001-.016-.007 0-.022v.022l.025.003h.23c.154 0 .282-.025.409-.05a.948.948 0 00.358-.174.67.67 0 00.23-.297 1.01 1.01 0 00.103-.398c0-.297-.103-.521-.307-.67-.205-.149-.435-.223-.741-.223-.179 0-.358.025-.486.099-.128.075-.256.149-.332.273-.103.1-.154.248-.205.397-.05.148-.076.295-.077.472zM2.227 32.047c.204.149.435.224.716.224.434 0 .741-.174.945-.546.205-.372.333-.894.358-1.638l-.025-.025a1.364 1.364 0 01-.563.571c-.23.149-.511.198-.792.198a1.94 1.94 0 01-.792-.149 1.867 1.867 0 01-.588-.397 1.753 1.753 0 01-.358-.595A2.43 2.43 0 011 28.92c0-.273.051-.521.128-.744.102-.223.23-.422.383-.571.179-.174.384-.298.614-.372.23-.099.485-.124.767-.124.281 0 .536.049.766.124.23.074.461.223.639.422.179.198.333.471.435.819.102.347.153.794.153 1.315 0 .968-.153 1.712-.485 2.234-.307.521-.818.794-1.534.794-.486 0-.895-.124-1.201-.348-.307-.223-.512-.595-.537-1.092h.69c.101.296.228.518.409.67zm1.84-3.524a1.021 1.021 0 00-.23-.397c-.102-.099-.23-.223-.383-.273a1.11 1.11 0 00-.511-.099c-.205 0-.384.025-.537.099a1.042 1.042 0 00-.358.298c-.102.124-.153.273-.204.422-.052.149-.052.323-.052.496 0 .149.026.298.077.447a.928.928 0 00.23.372c.102.1.23.199.358.273.128.075.281.1.46.1s.332-.025.486-.1c.153-.074.281-.149.383-.273.102-.124.179-.248.23-.397a1.41 1.41 0 00.077-.471.814.814 0 00-.026-.497zm47.852-12.831c.079-.25.206-.447.358-.62.154-.174.358-.323.614-.422.23-.099.511-.149.818-.149.255 0 .485.025.715.099.23.075.409.174.588.298.154.124.282.298.384.497.102.198.153.421.153.694 0 .249-.051.472-.128.671a1.781 1.781 0 01-.306.521 1.747 1.747 0 01-.461.397c-.178.124-.332.248-.511.347-.179.1-.358.199-.537.323-.178.124-.332.223-.485.323a2.685 2.685 0 00-.384.372.999.999 0 00-.204.471h2.965v.596h-3.809c.026-.323.077-.62.179-.844.102-.223.205-.447.358-.62.153-.174.307-.323.511-.472.179-.124.384-.248.588-.372.256-.149.46-.273.639-.397s.333-.248.46-.372a1.55 1.55 0 00.282-.422c.076-.149.102-.323.102-.522a.801.801 0 00-.102-.421.95.95 0 00-.23-.323c-.103-.099-.231-.149-.358-.199a1.245 1.245 0 00-.435-.074c-.204 0-.383.05-.511.124-.153.074-.256.199-.358.323-.102.124-.153.273-.204.446-.051.172-.052.32-.052.497h-.69a1.562 1.562 0 01.051-.77zm-45.244.77c0-.224.025-.447.076-.646.052-.223.103-.421.179-.595.077-.199.205-.348.333-.497.153-.148.332-.248.536-.347.205-.099.486-.124.767-.124.307 0 .563.05.767.124.205.074.384.199.537.347.153.149.256.298.332.497.077.198.154.397.179.595.051.224.077.422.077.646 0 .223.025.446.025.645s0 .422-.025.645c-.026.224-.026.447-.077.646a3.298 3.298 0 01-.179.595 2.095 2.095 0 01-.332.497 1.655 1.655 0 01-.537.347c-.23.099-.46.124-.767.124-.306 0-.562-.05-.767-.124a1.53 1.53 0 01-.536-.347 1.317 1.317 0 01-.333-.497c-.076-.198-.153-.397-.179-.595a2.794 2.794 0 01-.076-.646c0-.223-.026-.446-.026-.645.025-.197.026-.418.026-.645zm-1.406 3.4h-.716v-4.021H3.071v-.546c.204 0 .383-.025.562-.049.179-.025.358-.075.511-.174.153-.075.281-.199.384-.323.102-.149.178-.322.204-.521h.537v5.634zm2.147-2.06c.026.273.051.496.128.744.077.224.204.422.358.596.153.174.383.248.69.248.307 0 .511-.074.69-.248.179-.174.281-.347.358-.596.077-.223.128-.471.128-.744.025-.273.025-.496.025-.72v-.447c0-.173-.025-.322-.051-.496a3.335 3.335 0 00-.102-.496c-.051-.149-.102-.298-.205-.422a1.225 1.225 0 00-.332-.298c-.128-.074-.307-.099-.511-.099-.205 0-.358.025-.511.099a.947.947 0 00-.333.298 1.093 1.093 0 00-.204.422 2.806 2.806 0 00-.102.496c-.026.174-.026.323-.052.496v.447c.026.224.026.472.026.72zm12.014-7.346h-.69v.025-4.046h-1.508v-.546c.204 0 .383-.025.562-.049.179-.025.358-.075.511-.174.154-.075.282-.199.384-.323.102-.149.179-.322.204-.521h.537v5.634zm24.897 0h-.69V6.435h-1.508v-.546c.205 0 .384-.025.562-.049.179-.025.358-.075.512-.174.153-.075.281-.199.383-.323a1.19 1.19 0 00.205-.521h.536v5.634zm-28.885 0h-.69V6.435h-1.508v-.546c.205 0 .384-.025.563-.049.178-.025.357-.075.511-.174.153-.075.281-.199.383-.323a1.19 1.19 0 00.205-.521h.536v5.634zm13.293-3.822h-.69V2.588h-1.509v-.521c.205 0 .384-.025.563-.049.179-.025.358-.075.511-.174.153-.075.281-.199.383-.323.103-.149.179-.322.205-.521h.537v5.634zm1.508-4.443a1.666 1.666 0 01.971-1.042c.23-.099.511-.149.818-.149.256 0 .486.025.716.099.23.075.409.174.588.298a1.544 1.544 0 01.537 1.191c0 .249-.051.472-.128.67a1.776 1.776 0 01-.307.522 1.76 1.76 0 01-.46.397c-.179.124-.332.248-.511.347a6.113 6.113 0 00-.537.323c-.179.124-.332.223-.486.322a2.732 2.732 0 00-.383.373 1 1 0 00-.205.471h2.966v.596h-3.784c.026-.323.077-.621.179-.844.103-.223.205-.447.358-.62.154-.174.307-.323.511-.472.179-.124.384-.248.588-.372.256-.149.46-.273.639-.397s.333-.248.46-.373c.128-.124.205-.273.282-.421.076-.149.102-.323.102-.522a.805.805 0 00-.102-.422.942.942 0 00-.23-.322c-.103-.099-.23-.149-.358-.199a1.241 1.241 0 00-.435-.074c-.204 0-.383.049-.511.124-.153.074-.256.198-.358.323-.102.124-.153.273-.204.446-.051.172-.052.32-.052.497h-.69c-.076-.247-.051-.518.026-.77z"
    />
  </svg>
</template>

<script setup lang="ts">
import { ref } from 'vue';
import ClockHand from './ClockHand.vue';
import DateTime from './DateTime.vue';

const time = ref(new Date());

const getAngle = (type: string) => {
  const min = time.value.getMinutes();

  if (type === 'hour') {
    const hour = time.value.getHours() % 12;

    return ((hour + min / 60) * 30) % 360;
  } else if (type === 'min') {
    return (min * 6) % 360;
  } else {
    return (time.value.getSeconds() * 6) % 360;
  }
};

const handleUpdate = (datetime: Date) => {
  time.value = datetime;
};
</script>

<style lang="scss">
.ui-clock-face {
  width: 58px;
  height: 58px;
  min-height: 58px;
  padding: 2px;
  border-radius: $border-radius-round;
  background-color: $white;

  .ui-hour-hand,
  .ui-minute-hand {
    stroke: $black;
  }

  .ui-hour-hand {
    stroke-width: 2px;
  }

  .ui-minute-hand {
    stroke-width: 2px;
  }

  .ui-second-hand {
    stroke-width: 1px;
    stroke: $red;
  }
}
</style>
